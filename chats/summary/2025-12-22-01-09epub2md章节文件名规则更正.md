# epub2md 章节文件名规则更正（chapter 主章节）

## 需求更正

你补充确认的目标命名为：

- `2025213The-Scaling-Era0101-scaling.md`
- `2025213The-Scaling-Era0201-evals.md`
- `2025213The-Scaling-Era0301-internals.md`
- `2025213The-Scaling-Era0401-safety.md`

即 `chapter <n>` 的 4 位编号应为 `{n:02d}01`（而不是 `01{n:02d}`）。

## 实现

- 更新 `scripts/epub2md.py` 中 `safe_spine_markdown_filename()`：
  - 识别 `chapter <n>` 标题后，生成 `<epub_stem>{n:02d}01-<rest_slug>.md`
  - 非 `chapter` 标题保持原逻辑不变（`{index:03d}-...`）。

## 验证

### 使用的 EPUB

- `/Users/Daglas/dalong.knowledgetext/原文书籍/2025213The-Scaling-Era.epub`

### 命令

```bash
python scripts/epub2md.py "/Users/Daglas/dalong.knowledgetext/原文书籍/2025213The-Scaling-Era.epub" "working/2025213The-Scaling-Era_data"
```

### 输出（节选）

`working/2025213The-Scaling-Era_data/` 中实际生成：

- `2025213The-Scaling-Era0101-scaling.md`
- `2025213The-Scaling-Era0201-evals.md`
- `2025213The-Scaling-Era0301-internals.md`
- `2025213The-Scaling-Era0401-safety.md`

